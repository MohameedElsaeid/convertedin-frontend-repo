<p-dropdown
  styleClass="w-full convertedin__country-dropdown {{ styleClass }}"
  [virtualScroll]="true"
  [virtualScrollItemSize]="30"
  [options]="countries"
  [disabled]="disabled"
  [filter]="true"
  filterBy="name,countryCode"
  [(ngModel)]="activeCountry"
  (ngModelChange)="activeCountryChange()"
  [emptyFilterMessage]="emptyFilterMessage"
>
  <!-- Selected country template -->
  <ng-template pTemplate="selectedItem">
    <div class="flex align-items-center gap-2">
      <!-- Flag icon -->
      <i class="fi fi-{{ activeCountry.countryISO | lowercase }}"></i>
      <!-- Country name with code -->
      <span *ngIf="showSelectedCountryName">
        ({{ activeCountry.countryCode }}) {{ activeCountry.name }}
      </span>
      <!-- Country code only -->
      <span *ngIf="!showSelectedCountryName">
        {{ activeCountry.countryCode }}
      </span>
    </div>
  </ng-template>

  <!-- List items template -->
  <ng-template let-country pTemplate="item">
    <div class="flex align-items-center gap-2">
      <i class="fi fi-{{ country.countryISO | lowercase }}"></i>
      <div>({{ country.countryCode }}) {{ country.name }}</div>
    </div>
  </ng-template>
</p-dropdown>
